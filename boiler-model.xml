<?xml version="1.0" encoding="utf-8"?><!DOCTYPE nta PUBLIC '-//Uppaal Team//DTD Flat System 1.1//EN' 'http://www.it.uu.se/research/group/darts/uppaal/flat-1_1.dtd'><nta><declaration>// Place global declarations here.
const int ctime=50;
chan deact_pump, act_pump, check_water, check_steam, water_ok, water_min, water_max, steam_ok, steam_nok, check_pumpworking, pump1_ok, pump1_nok, pump2_ok, pump2_nok, check_pump, reset;
broadcast chan shutdown;
int pump;
int s = 0;
int w = 50;
int pump1, pump2;
int ENABLED = 1;
int DISABLED = 0;
int sd = 0, sdr = 0, rr=0, r=0;

int water(){
if (pump1==1|| pump2==1){
return w=w+2;
}
return w=w-1;
}

int steam(){
if (pump1==1 || pump2==1){
return s=s+0;
}
return s=s+0;
}

void values(){
w=water();
s=steam();
}</declaration><template><name>Water</name><declaration>int wLow = 20;
int wHigh = 80;
int wMin=0;
int wMax=100;
int W = 100;</declaration><location id="id0" x="-640" y="-320"><name x="-624" y="-336">WaterChecking</name></location><location id="id1" x="-800" y="-320"><name x="-848" y="-328">Idle</name></location><init ref="id1"/><transition><source ref="id0"/><target ref="id1"/><label kind="guard" x="-784" y="-264">w&lt;wHigh &amp;&amp; w&gt;wLow</label><label kind="synchronisation" x="-752" y="-240">water_ok!</label><nail x="-640" y="-240"/><nail x="-800" y="-240"/></transition><transition><source ref="id1"/><target ref="id0"/><label kind="synchronisation" x="-768" y="-320">check_water?</label></transition><transition><source ref="id0"/><target ref="id1"/><label kind="guard" x="-776" y="-184">w&gt;wMax || w&lt;wMin</label><label kind="synchronisation" x="-752" y="-160">shutdown!</label><nail x="-640" y="-160"/><nail x="-800" y="-160"/></transition><transition><source ref="id0"/><target ref="id1"/><label kind="guard" x="-752" y="-504">w&gt;=wHigh</label><label kind="synchronisation" x="-760" y="-480">water_max!</label><nail x="-640" y="-480"/><nail x="-800" y="-480"/></transition><transition><source ref="id0"/><target ref="id1"/><label kind="guard" x="-752" y="-424">w&lt;=wLow</label><label kind="synchronisation" x="-760" y="-400">water_min!</label><nail x="-640" y="-400"/><nail x="-800" y="-400"/></transition></template><template><name>Steam</name><declaration>int S = 100;
int sHigh = 85;</declaration><location id="id2" x="0" y="-48"><name x="16" y="-56">SteamChecking</name></location><location id="id3" x="-160" y="-48"><name x="-208" y="-56">Idle</name></location><init ref="id3"/><transition><source ref="id2"/><target ref="id3"/><label kind="guard" x="-112" y="-152">s&lt;sHigh</label><label kind="synchronisation" x="-120" y="-128">steam_ok!</label><nail x="0" y="-128"/><nail x="-160" y="-128"/></transition><transition><source ref="id2"/><target ref="id3"/><label kind="guard" x="-112" y="8">s&gt;=sHigh</label><label kind="synchronisation" x="-112" y="40">shutdown!</label><nail x="0" y="32"/><nail x="-160" y="32"/></transition><transition><source ref="id3"/><target ref="id2"/><label kind="synchronisation" x="-128" y="-48">check_steam?</label></transition></template><template><name>Controller</name><declaration>clock x;</declaration><location id="id4" x="-64" y="-32"><name x="-48" y="-48">CheckingPump2</name></location><location id="id5" x="-192" y="-32"><name x="-248" y="-64">CheckingPump1</name></location><location id="id6" x="-416" y="-96"><name x="-528" y="-136">CheckingWater</name><label kind="invariant" x="-512" y="-120">x&lt;2500</label></location><location id="id7" x="-704" y="64"><name x="-688" y="80">Shutdown</name></location><location id="id8" x="-552" y="-96"><name x="-592" y="-128">Idle2</name></location><location id="id9" x="-704" y="-96"><name x="-824" y="-144">CheckingSteam</name><label kind="invariant" x="-800" y="-128">x&lt;2500</label></location><location id="id10" x="-896" y="-96"><name x="-944" y="-128">Idle</name></location><init ref="id10"/><transition><source ref="id4"/><target ref="id7"/><label kind="synchronisation" x="-160" y="8">shutdown?</label><nail x="-192" y="64"/></transition><transition><source ref="id5"/><target ref="id7"/><label kind="synchronisation" x="-232" y="8">shutdown?</label><nail x="-192" y="64"/></transition><transition><source ref="id7"/><target ref="id10"/><label kind="synchronisation" x="-896" y="128">reset?</label><label kind="assignment" x="-888" y="144">r=1</label><nail x="-704" y="128"/><nail x="-1024" y="128"/><nail x="-1024" y="-96"/></transition><transition><source ref="id9"/><target ref="id7"/><label kind="guard" x="-664" y="-16">x&gt;=2500</label><label kind="synchronisation" x="-664" y="-32">shutdown!</label><nail x="-672" y="-16"/></transition><transition><source ref="id6"/><target ref="id7"/><label kind="guard" x="-384" y="-8">x&gt;=2500</label><label kind="synchronisation" x="-384" y="8">shutdown!</label><nail x="-384" y="-16"/><nail x="-416" y="64"/></transition><transition><source ref="id9"/><target ref="id7"/><label kind="synchronisation" x="-808" y="-32">shutdown?</label><nail x="-736" y="-16"/></transition><transition><source ref="id4"/><target ref="id7"/><label kind="synchronisation" x="-48" y="8">pump2_nok?</label><label kind="assignment" x="-48" y="24">values()</label><nail x="-64" y="64"/></transition><transition><source ref="id6"/><target ref="id10"/><label kind="synchronisation" x="-344" y="-96">water_max?</label><label kind="assignment" x="-688" y="-320">pump1=DISABLED, pump2=DISABLED, values()</label><nail x="-256" y="-96"/><nail x="-256" y="-320"/><nail x="-896" y="-320"/></transition><transition><source ref="id4"/><target ref="id10"/><label kind="synchronisation" x="-56" y="-152">pump2_ok?</label><label kind="assignment" x="-688" y="-448">pump1=DISABLED, pump2=ENABLED, values()</label><nail x="-64" y="-448"/><nail x="-896" y="-448"/></transition><transition><source ref="id5"/><target ref="id4"/><label kind="synchronisation" x="-168" y="-32">pump1_nok?</label><label kind="assignment" x="-160" y="-16">values()</label><nail x="-176" y="-32"/></transition><transition><source ref="id5"/><target ref="id10"/><label kind="synchronisation" x="-184" y="-152">pump1_ok?</label><label kind="assignment" x="-688" y="-384">pump1=ENABLED, pump2=DISABLED, values()</label><nail x="-192" y="-96"/><nail x="-192" y="-384"/><nail x="-896" y="-384"/></transition><transition><source ref="id6"/><target ref="id5"/><label kind="synchronisation" x="-304" y="-32">water_min?</label><label kind="assignment" x="-288" y="-16">values()</label><nail x="-320" y="-32"/></transition><transition><source ref="id6"/><target ref="id10"/><label kind="synchronisation" x="-616" y="-256">water_ok?</label><label kind="assignment" x="-608" y="-240">values()</label><nail x="-320" y="-160"/><nail x="-320" y="-256"/><nail x="-896" y="-256"/></transition><transition><source ref="id6"/><target ref="id6"/><label kind="guard" x="-504" y="-216">x==500||1000||1500||2000</label><label kind="synchronisation" x="-464" y="-232">check_water!</label><label kind="assignment" x="-440" y="-192">values()</label><nail x="-448" y="-192"/><nail x="-384" y="-192"/></transition><transition><source ref="id8"/><target ref="id7"/><label kind="synchronisation" x="-584" y="-48">shutdown?</label><nail x="-552" y="64"/></transition><transition><source ref="id9"/><target ref="id8"/><label kind="synchronisation" x="-664" y="-96">steam_ok?</label><label kind="assignment" x="-656" y="-80">values()</label></transition><transition><source ref="id9"/><target ref="id9"/><label kind="guard" x="-792" y="-216">x==500||1000||1500||2000</label><label kind="synchronisation" x="-752" y="-232">check_steam!</label><label kind="assignment" x="-728" y="-192">values()</label><nail x="-736" y="-192"/><nail x="-672" y="-192"/></transition><transition><source ref="id10"/><target ref="id7"/><label kind="synchronisation" x="-968" y="-24">shutdown?</label><label kind="assignment" x="-864" y="64">r=0, rr-=0</label><nail x="-896" y="-80"/><nail x="-896" y="64"/></transition><transition><source ref="id6"/><target ref="id7"/><label kind="synchronisation" x="-520" y="-8">shutdown?</label><nail x="-432" y="-56"/><nail x="-448" y="-16"/><nail x="-416" y="64"/></transition><transition><source ref="id8"/><target ref="id6"/><label kind="synchronisation" x="-528" y="-96">check_water!</label><label kind="assignment" x="-528" y="-80">x:=0, values()</label></transition><transition><source ref="id10"/><target ref="id9"/><label kind="synchronisation" x="-856" y="-96">check_steam!</label><label kind="assignment" x="-880" y="-80">x:=0, values(), r=0, rr=0</label></transition></template><template><name>Pump1</name><location id="id11" x="-928" y="-384"><name x="-904" y="-392">Idle</name></location><init ref="id11"/><transition><source ref="id11"/><target ref="id11"/><label kind="synchronisation" x="-968" y="-288">pump1_nok!</label><nail x="-880" y="-296"/><nail x="-976" y="-296"/></transition><transition><source ref="id11"/><target ref="id11"/><label kind="synchronisation" x="-968" y="-496">pump1_ok!</label><nail x="-880" y="-472"/><nail x="-976" y="-472"/></transition></template><template><name>Pump2</name><location id="id12" x="-32" y="-32"><name x="-8" y="-32">Idle</name></location><init ref="id12"/><transition><source ref="id12"/><target ref="id12"/><label kind="synchronisation" x="-72" y="56">pump2_nok!</label><nail x="16" y="56"/><nail x="-80" y="56"/></transition><transition><source ref="id12"/><target ref="id12"/><label kind="synchronisation" x="-64" y="-144">pump2_ok!</label><nail x="16" y="-120"/><nail x="-80" y="-120"/></transition></template><template><name>Button</name><location id="id13" x="-447" y="-158"><name x="-455" y="-134">Idle</name></location><init ref="id13"/><transition><source ref="id13"/><target ref="id13"/><label kind="synchronisation" x="-612" y="-177">shutdown!</label><label kind="assignment" x="-632" y="-160">sdr=1, rr=0</label><nail x="-455" y="-150"/><nail x="-544" y="-93"/><nail x="-544" y="-227"/></transition><transition><source ref="id13"/><target ref="id13"/><label kind="guard" x="-346" y="-180">s&lt;85 &amp;&amp; w&lt;80 &amp;&amp; w&gt;20</label><label kind="synchronisation" x="-348" y="-162">reset!</label><label kind="assignment" x="-347" y="-148">sdr=0, rr=1</label><nail x="-352" y="-92"/><nail x="-352" y="-226"/></transition></template><system>// Place template instantiations here.
// List one or more processes to be composed into a system.
system Controller, Water, Steam, Pump1, Pump2, Button;
</system></nta>